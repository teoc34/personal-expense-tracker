{"ast":null,"code":"import React,{useState,useRef}from'react';import{useMutation,useQueryClient}from'react-query';import{uploadAPI}from'../services/api';import{formatCurrency,formatDate,formatFileSize}from'../utils/formatters';import{toast}from'react-hot-toast';import{Upload as UploadIcon,CheckCircle,AlertCircle,X,Eye,RefreshCw}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Upload=()=>{const[selectedFile,setSelectedFile]=useState(null);const[dragActive,setDragActive]=useState(false);const[autoCategorize,setAutoCategorize]=useState(true);const[uploadResult,setUploadResult]=useState(null);const[validationResult,setValidationResult]=useState(null);const[currentStep,setCurrentStep]=useState('upload');const fileInputRef=useRef(null);const queryClient=useQueryClient();// Upload mutation\nconst uploadMutation=useMutation(_ref=>{let{file,autoCategorize}=_ref;return uploadAPI.uploadCSV(file,autoCategorize);},{onSuccess:response=>{setUploadResult(response.data);setCurrentStep('result');queryClient.invalidateQueries('transactions');queryClient.invalidateQueries('dashboard');queryClient.invalidateQueries('categories');const{processed_count,error_count}=response.data;if(error_count===0){toast.success(\"Successfully imported \".concat(processed_count,\" transactions\"));}else if(processed_count>0){toast.success(\"Imported \".concat(processed_count,\" transactions with \").concat(error_count,\" errors\"));}else{toast.error('No transactions were imported');}},onError:error=>{var _error$response,_error$response$data;const message=((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'Failed to upload file';toast.error(message);}});// Validation mutation\nconst validateMutation=useMutation(file=>uploadAPI.validateCSV(file),{onSuccess:response=>{setValidationResult(response.data);setCurrentStep('preview');},onError:error=>{var _error$response2,_error$response2$data;const message=((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error)||'Failed to validate file';toast.error(message);setValidationResult({valid:false,preview:[],total_count:0,columns_detected:[],error:message});setCurrentStep('preview');}});const handleDrag=e=>{e.preventDefault();e.stopPropagation();if(e.type===\"dragenter\"||e.type===\"dragover\"){setDragActive(true);}else if(e.type===\"dragleave\"){setDragActive(false);}};const handleDrop=e=>{e.preventDefault();e.stopPropagation();setDragActive(false);if(e.dataTransfer.files&&e.dataTransfer.files[0]){handleFileSelect(e.dataTransfer.files[0]);}};const handleFileSelect=file=>{if(!file.type.includes('csv')&&!file.name.toLowerCase().endsWith('.csv')){toast.error('Please select a CSV file');return;}if(file.size>5*1024*1024){// 5MB limit\ntoast.error('File size must be less than 5MB');return;}setSelectedFile(file);setUploadResult(null);setValidationResult(null);setCurrentStep('upload');};const handleFileInputChange=e=>{if(e.target.files&&e.target.files[0]){handleFileSelect(e.target.files[0]);}};const handleValidate=()=>{if(selectedFile){validateMutation.mutate(selectedFile);}};const handleUpload=()=>{if(selectedFile){uploadMutation.mutate({file:selectedFile,autoCategorize});}};const handleReset=()=>{setSelectedFile(null);setUploadResult(null);setValidationResult(null);setCurrentStep('upload');if(fileInputRef.current){fileInputRef.current.value='';}};const renderUploadStep=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative border-2 border-dashed rounded-lg p-6 \".concat(dragActive?'border-primary-500 bg-primary-50':selectedFile?'border-success-500 bg-success-50':'border-gray-300 hover:border-gray-400'),onDragEnter:handleDrag,onDragLeave:handleDrag,onDragOver:handleDrag,onDrop:handleDrop,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(UploadIcon,{className:\"mx-auto h-12 w-12 \".concat(selectedFile?'text-success-400':'text-gray-400')}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:selectedFile?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm font-medium text-success-700\",children:[\"File selected: \",selectedFile.name]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[\"Size: \",formatFileSize(selectedFile.size)]})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"file-upload\",className:\"cursor-pointer\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"mt-2 block text-sm font-medium text-gray-900\",children:[\"Drop your CSV file here, or\",' ',/*#__PURE__*/_jsx(\"span\",{className:\"text-primary-600 hover:text-primary-500\",children:\"browse\"})]})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"CSV files up to 5MB are supported\"})]})})]}),/*#__PURE__*/_jsx(\"input\",{ref:fileInputRef,id:\"file-upload\",name:\"file-upload\",type:\"file\",accept:\".csv\",className:\"sr-only\",onChange:handleFileInputChange})]}),selectedFile&&/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Upload Options\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center h-5\",children:/*#__PURE__*/_jsx(\"input\",{id:\"auto-categorize\",type:\"checkbox\",checked:autoCategorize,onChange:e=>setAutoCategorize(e.target.checked),className:\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3 text-sm\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"auto-categorize\",className:\"font-medium text-gray-700\",children:\"Auto-categorize transactions\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Automatically assign categories to transactions based on their descriptions\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 flex space-x-3\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:handleValidate,disabled:validateMutation.isLoading,className:\"btn-secondary\",children:[validateMutation.isLoading?/*#__PURE__*/_jsx(\"div\",{className:\"spinner mr-2\"}):/*#__PURE__*/_jsx(Eye,{className:\"h-4 w-4 mr-2\"}),\"Preview\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleUpload,disabled:uploadMutation.isLoading,className:\"btn-primary\",children:[uploadMutation.isLoading?/*#__PURE__*/_jsx(\"div\",{className:\"spinner mr-2\"}):/*#__PURE__*/_jsx(UploadIcon,{className:\"h-4 w-4 mr-2\"}),\"Upload\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"CSV Format Guide\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3 text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Your CSV file should contain the following columns (column names are flexible):\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-disc list-inside space-y-1 ml-4\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Amount:\"}),\" Transaction amount (positive or negative)\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Description:\"}),\" Transaction description or memo\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Date:\"}),\" Transaction date (various formats supported)\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Category:\"}),\" Transaction category (optional)\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 bg-gray-50 p-3 rounded\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-700 mb-2\",children:\"Example CSV format:\"}),/*#__PURE__*/_jsxs(\"pre\",{className:\"text-xs text-gray-600\",children:[\"Date,Description,Amount,Category\",'\\n',\"2024-01-15,Grocery Store,-45.67,Food\",'\\n',\"2024-01-16,Salary Deposit,2500.00,Income\",'\\n',\"2024-01-17,Gas Station,-32.10,Transportation\"]})]})]})]})]});const renderPreviewStep=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900\",children:\"Preview\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleReset,className:\"btn-secondary\",children:[/*#__PURE__*/_jsx(X,{className:\"h-4 w-4 mr-2\"}),\"Cancel\"]})]}),validationResult&&/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[validationResult.valid?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-success-700\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"h-5 w-5 mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"File validation successful\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-error-700\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"h-5 w-5 mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"File validation failed\"})]}),validationResult.valid&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 grid grid-cols-2 gap-4 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500\",children:\"Total transactions:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 font-medium\",children:validationResult.total_count})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500\",children:\"Columns detected:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 font-medium\",children:validationResult.columns_detected.length})]})]}),validationResult.error&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 text-sm text-error-600\",children:/*#__PURE__*/_jsx(\"p\",{children:validationResult.error})})]}),(validationResult===null||validationResult===void 0?void 0:validationResult.valid)&&validationResult.preview.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Transaction Preview (First 5 rows)\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Amount\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Type\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Date\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:validationResult.preview.map((transaction,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",children:transaction.description}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",children:formatCurrency(transaction.amount)}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium \".concat(transaction.type==='income'?'bg-success-100 text-success-800':'bg-error-100 text-error-800'),children:transaction.type})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",children:formatDate(transaction.date)})]},index))})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 flex justify-end space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleReset,className:\"btn-secondary\",children:\"Cancel\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleUpload,disabled:uploadMutation.isLoading,className:\"btn-primary\",children:[uploadMutation.isLoading?/*#__PURE__*/_jsx(\"div\",{className:\"spinner mr-2\"}):/*#__PURE__*/_jsx(UploadIcon,{className:\"h-4 w-4 mr-2\"}),\"Proceed with Upload\"]})]})]})]});const renderResultStep=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900\",children:\"Upload Results\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleReset,className:\"btn-primary\",children:[/*#__PURE__*/_jsx(RefreshCw,{className:\"h-4 w-4 mr-2\"}),\"Upload Another File\"]})]}),uploadResult&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 gap-5 sm:grid-cols-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-success-600\",children:uploadResult.processed_count}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"Successfully Imported\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-error-600\",children:uploadResult.error_count}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"Errors\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-gray-600\",children:uploadResult.processed_count+uploadResult.error_count}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"Total Processed\"})]})]}),uploadResult.errors.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:[\"Errors (\",uploadResult.errors.length,\")\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[uploadResult.errors.slice(0,10).map((error,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"bg-error-50 border border-error-200 rounded-md p-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"h-5 w-5 text-error-400 mt-0.5\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm font-medium text-error-800\",children:[\"Row \",error.row,\": \",error.error]}),error.transaction&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-error-600 mt-1\",children:[error.transaction.description,\" - \",formatCurrency(error.transaction.amount)]})]})]})},index)),uploadResult.errors.length>10&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500 text-center\",children:[\"... and \",uploadResult.errors.length-10,\" more errors\"]})]})]}),uploadResult.transactions.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:[\"Successfully Imported (\",Math.min(uploadResult.transactions.length,10),\" of \",uploadResult.transactions.length,\" shown)\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Category\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Amount\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Date\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:uploadResult.transactions.slice(0,10).map((transaction,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",children:transaction.description}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",children:transaction.category_name?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 rounded-full mr-2\",style:{backgroundColor:transaction.category_color}}),transaction.category_name]}):/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400\",children:\"Uncategorized\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium \".concat(transaction.type==='income'?'text-success-600':'text-error-600'),children:[transaction.type==='income'?'+':'-',formatCurrency(transaction.amount,'USD',false)]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",children:formatDate(transaction.date)})]},index))})]})})]})]})]});return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"Upload Transactions\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:\"Import your transactions from a CSV file\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center \".concat(currentStep==='upload'?'text-primary-600':'text-gray-400'),children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium \".concat(currentStep==='upload'?'bg-primary-100':'bg-gray-100'),children:\"1\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-sm font-medium\",children:\"Upload\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 h-px bg-gray-300\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center \".concat(currentStep==='preview'?'text-primary-600':'text-gray-400'),children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium \".concat(currentStep==='preview'?'bg-primary-100':'bg-gray-100'),children:\"2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-sm font-medium\",children:\"Preview\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 h-px bg-gray-300\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center \".concat(currentStep==='result'?'text-primary-600':'text-gray-400'),children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium \".concat(currentStep==='result'?'bg-primary-100':'bg-gray-100'),children:\"3\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-sm font-medium\",children:\"Results\"})]})]}),currentStep==='upload'&&renderUploadStep(),currentStep==='preview'&&renderPreviewStep(),currentStep==='result'&&renderResultStep()]});};export default Upload;","map":{"version":3,"names":["React","useState","useRef","useMutation","useQueryClient","uploadAPI","formatCurrency","formatDate","formatFileSize","toast","Upload","UploadIcon","CheckCircle","AlertCircle","X","Eye","RefreshCw","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","selectedFile","setSelectedFile","dragActive","setDragActive","autoCategorize","setAutoCategorize","uploadResult","setUploadResult","validationResult","setValidationResult","currentStep","setCurrentStep","fileInputRef","queryClient","uploadMutation","_ref","file","uploadCSV","onSuccess","response","data","invalidateQueries","processed_count","error_count","success","concat","error","onError","_error$response","_error$response$data","message","validateMutation","validateCSV","_error$response2","_error$response2$data","valid","preview","total_count","columns_detected","handleDrag","e","preventDefault","stopPropagation","type","handleDrop","dataTransfer","files","handleFileSelect","includes","name","toLowerCase","endsWith","size","handleFileInputChange","target","handleValidate","mutate","handleUpload","handleReset","current","value","renderUploadStep","className","children","onDragEnter","onDragLeave","onDragOver","onDrop","htmlFor","ref","id","accept","onChange","checked","onClick","disabled","isLoading","renderPreviewStep","length","map","transaction","index","description","amount","date","renderResultStep","errors","slice","row","transactions","Math","min","category_name","style","backgroundColor","category_color"],"sources":["/workspace/frontend/src/pages/Upload.tsx"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport { useMutation, useQueryClient } from 'react-query';\nimport { uploadAPI } from '../services/api';\nimport { formatCurrency, formatDate, formatFileSize } from '../utils/formatters';\nimport { toast } from 'react-hot-toast';\nimport {\n  Upload as UploadIcon,\n  FileText,\n  CheckCircle,\n  AlertCircle,\n  X,\n  Download,\n  Eye,\n  RefreshCw\n} from 'lucide-react';\n\ninterface UploadResult {\n  success: boolean;\n  processed_count: number;\n  error_count: number;\n  transactions: any[];\n  errors: any[];\n}\n\ninterface ValidationResult {\n  valid: boolean;\n  preview: any[];\n  total_count: number;\n  columns_detected: string[];\n  error?: string;\n}\n\nconst Upload: React.FC = () => {\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n  const [dragActive, setDragActive] = useState(false);\n  const [autoCategorize, setAutoCategorize] = useState(true);\n  const [uploadResult, setUploadResult] = useState<UploadResult | null>(null);\n  const [validationResult, setValidationResult] = useState<ValidationResult | null>(null);\n  const [currentStep, setCurrentStep] = useState<'upload' | 'preview' | 'result'>('upload');\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const queryClient = useQueryClient();\n\n  // Upload mutation\n  const uploadMutation = useMutation(\n    ({ file, autoCategorize }: { file: File; autoCategorize: boolean }) =>\n      uploadAPI.uploadCSV(file, autoCategorize),\n    {\n      onSuccess: (response) => {\n        setUploadResult(response.data);\n        setCurrentStep('result');\n        queryClient.invalidateQueries('transactions');\n        queryClient.invalidateQueries('dashboard');\n        queryClient.invalidateQueries('categories');\n        \n        const { processed_count, error_count } = response.data;\n        if (error_count === 0) {\n          toast.success(`Successfully imported ${processed_count} transactions`);\n        } else if (processed_count > 0) {\n          toast.success(`Imported ${processed_count} transactions with ${error_count} errors`);\n        } else {\n          toast.error('No transactions were imported');\n        }\n      },\n      onError: (error: any) => {\n        const message = error.response?.data?.error || 'Failed to upload file';\n        toast.error(message);\n      }\n    }\n  );\n\n  // Validation mutation\n  const validateMutation = useMutation(\n    (file: File) => uploadAPI.validateCSV(file),\n    {\n      onSuccess: (response) => {\n        setValidationResult(response.data);\n        setCurrentStep('preview');\n      },\n      onError: (error: any) => {\n        const message = error.response?.data?.error || 'Failed to validate file';\n        toast.error(message);\n        setValidationResult({ valid: false, preview: [], total_count: 0, columns_detected: [], error: message });\n        setCurrentStep('preview');\n      }\n    }\n  );\n\n  const handleDrag = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.type === \"dragenter\" || e.type === \"dragover\") {\n      setDragActive(true);\n    } else if (e.type === \"dragleave\") {\n      setDragActive(false);\n    }\n  };\n\n  const handleDrop = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragActive(false);\n    \n    if (e.dataTransfer.files && e.dataTransfer.files[0]) {\n      handleFileSelect(e.dataTransfer.files[0]);\n    }\n  };\n\n  const handleFileSelect = (file: File) => {\n    if (!file.type.includes('csv') && !file.name.toLowerCase().endsWith('.csv')) {\n      toast.error('Please select a CSV file');\n      return;\n    }\n    \n    if (file.size > 5 * 1024 * 1024) { // 5MB limit\n      toast.error('File size must be less than 5MB');\n      return;\n    }\n\n    setSelectedFile(file);\n    setUploadResult(null);\n    setValidationResult(null);\n    setCurrentStep('upload');\n  };\n\n  const handleFileInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files[0]) {\n      handleFileSelect(e.target.files[0]);\n    }\n  };\n\n  const handleValidate = () => {\n    if (selectedFile) {\n      validateMutation.mutate(selectedFile);\n    }\n  };\n\n  const handleUpload = () => {\n    if (selectedFile) {\n      uploadMutation.mutate({ file: selectedFile, autoCategorize });\n    }\n  };\n\n  const handleReset = () => {\n    setSelectedFile(null);\n    setUploadResult(null);\n    setValidationResult(null);\n    setCurrentStep('upload');\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  const renderUploadStep = () => (\n    <div className=\"space-y-6\">\n      {/* File Drop Zone */}\n      <div\n        className={`relative border-2 border-dashed rounded-lg p-6 ${\n          dragActive\n            ? 'border-primary-500 bg-primary-50'\n            : selectedFile\n            ? 'border-success-500 bg-success-50'\n            : 'border-gray-300 hover:border-gray-400'\n        }`}\n        onDragEnter={handleDrag}\n        onDragLeave={handleDrag}\n        onDragOver={handleDrag}\n        onDrop={handleDrop}\n      >\n        <div className=\"text-center\">\n          <UploadIcon className={`mx-auto h-12 w-12 ${\n            selectedFile ? 'text-success-400' : 'text-gray-400'\n          }`} />\n          <div className=\"mt-4\">\n            {selectedFile ? (\n              <div>\n                <p className=\"text-sm font-medium text-success-700\">\n                  File selected: {selectedFile.name}\n                </p>\n                <p className=\"text-sm text-gray-500\">\n                  Size: {formatFileSize(selectedFile.size)}\n                </p>\n              </div>\n            ) : (\n              <div>\n                <label htmlFor=\"file-upload\" className=\"cursor-pointer\">\n                  <span className=\"mt-2 block text-sm font-medium text-gray-900\">\n                    Drop your CSV file here, or{' '}\n                    <span className=\"text-primary-600 hover:text-primary-500\">browse</span>\n                  </span>\n                </label>\n                <p className=\"text-xs text-gray-500 mt-1\">\n                  CSV files up to 5MB are supported\n                </p>\n              </div>\n            )}\n          </div>\n        </div>\n        \n        <input\n          ref={fileInputRef}\n          id=\"file-upload\"\n          name=\"file-upload\"\n          type=\"file\"\n          accept=\".csv\"\n          className=\"sr-only\"\n          onChange={handleFileInputChange}\n        />\n      </div>\n\n      {/* Upload Options */}\n      {selectedFile && (\n        <div className=\"card\">\n          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Upload Options</h3>\n          \n          <div className=\"space-y-4\">\n            <div className=\"flex items-start\">\n              <div className=\"flex items-center h-5\">\n                <input\n                  id=\"auto-categorize\"\n                  type=\"checkbox\"\n                  checked={autoCategorize}\n                  onChange={(e) => setAutoCategorize(e.target.checked)}\n                  className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\n                />\n              </div>\n              <div className=\"ml-3 text-sm\">\n                <label htmlFor=\"auto-categorize\" className=\"font-medium text-gray-700\">\n                  Auto-categorize transactions\n                </label>\n                <p className=\"text-gray-500\">\n                  Automatically assign categories to transactions based on their descriptions\n                </p>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"mt-6 flex space-x-3\">\n            <button\n              onClick={handleValidate}\n              disabled={validateMutation.isLoading}\n              className=\"btn-secondary\"\n            >\n              {validateMutation.isLoading ? (\n                <div className=\"spinner mr-2\" />\n              ) : (\n                <Eye className=\"h-4 w-4 mr-2\" />\n              )}\n              Preview\n            </button>\n            \n            <button\n              onClick={handleUpload}\n              disabled={uploadMutation.isLoading}\n              className=\"btn-primary\"\n            >\n              {uploadMutation.isLoading ? (\n                <div className=\"spinner mr-2\" />\n              ) : (\n                <UploadIcon className=\"h-4 w-4 mr-2\" />\n              )}\n              Upload\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Instructions */}\n      <div className=\"card\">\n        <h3 className=\"text-lg font-medium text-gray-900 mb-4\">CSV Format Guide</h3>\n        \n        <div className=\"space-y-3 text-sm text-gray-600\">\n          <p>Your CSV file should contain the following columns (column names are flexible):</p>\n          \n          <ul className=\"list-disc list-inside space-y-1 ml-4\">\n            <li><strong>Amount:</strong> Transaction amount (positive or negative)</li>\n            <li><strong>Description:</strong> Transaction description or memo</li>\n            <li><strong>Date:</strong> Transaction date (various formats supported)</li>\n            <li><strong>Category:</strong> Transaction category (optional)</li>\n          </ul>\n\n          <div className=\"mt-4 bg-gray-50 p-3 rounded\">\n            <p className=\"font-medium text-gray-700 mb-2\">Example CSV format:</p>\n            <pre className=\"text-xs text-gray-600\">\nDate,Description,Amount,Category{'\\n'}\n2024-01-15,Grocery Store,-45.67,Food{'\\n'}\n2024-01-16,Salary Deposit,2500.00,Income{'\\n'}\n2024-01-17,Gas Station,-32.10,Transportation\n            </pre>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n  const renderPreviewStep = () => (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h2 className=\"text-xl font-semibold text-gray-900\">Preview</h2>\n        <button onClick={handleReset} className=\"btn-secondary\">\n          <X className=\"h-4 w-4 mr-2\" />\n          Cancel\n        </button>\n      </div>\n\n      {validationResult && (\n        <div className=\"card\">\n          {validationResult.valid ? (\n            <div className=\"flex items-center text-success-700\">\n              <CheckCircle className=\"h-5 w-5 mr-2\" />\n              <span className=\"font-medium\">File validation successful</span>\n            </div>\n          ) : (\n            <div className=\"flex items-center text-error-700\">\n              <AlertCircle className=\"h-5 w-5 mr-2\" />\n              <span className=\"font-medium\">File validation failed</span>\n            </div>\n          )}\n          \n          {validationResult.valid && (\n            <div className=\"mt-4 grid grid-cols-2 gap-4 text-sm\">\n              <div>\n                <span className=\"text-gray-500\">Total transactions:</span>\n                <span className=\"ml-2 font-medium\">{validationResult.total_count}</span>\n              </div>\n              <div>\n                <span className=\"text-gray-500\">Columns detected:</span>\n                <span className=\"ml-2 font-medium\">{validationResult.columns_detected.length}</span>\n              </div>\n            </div>\n          )}\n\n          {validationResult.error && (\n            <div className=\"mt-4 text-sm text-error-600\">\n              <p>{validationResult.error}</p>\n            </div>\n          )}\n        </div>\n      )}\n\n      {validationResult?.valid && validationResult.preview.length > 0 && (\n        <div className=\"card\">\n          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">\n            Transaction Preview (First 5 rows)\n          </h3>\n          \n          <div className=\"overflow-x-auto\">\n            <table className=\"min-w-full divide-y divide-gray-200\">\n              <thead className=\"bg-gray-50\">\n                <tr>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Description\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Amount\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Type\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Date\n                  </th>\n                </tr>\n              </thead>\n              <tbody className=\"bg-white divide-y divide-gray-200\">\n                {validationResult.preview.map((transaction, index) => (\n                  <tr key={index}>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                      {transaction.description}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                      {formatCurrency(transaction.amount)}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\n                        transaction.type === 'income' \n                          ? 'bg-success-100 text-success-800'\n                          : 'bg-error-100 text-error-800'\n                      }`}>\n                        {transaction.type}\n                      </span>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                      {formatDate(transaction.date)}\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n\n          <div className=\"mt-6 flex justify-end space-x-3\">\n            <button onClick={handleReset} className=\"btn-secondary\">\n              Cancel\n            </button>\n            <button\n              onClick={handleUpload}\n              disabled={uploadMutation.isLoading}\n              className=\"btn-primary\"\n            >\n              {uploadMutation.isLoading ? (\n                <div className=\"spinner mr-2\" />\n              ) : (\n                <UploadIcon className=\"h-4 w-4 mr-2\" />\n              )}\n              Proceed with Upload\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n\n  const renderResultStep = () => (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h2 className=\"text-xl font-semibold text-gray-900\">Upload Results</h2>\n        <button onClick={handleReset} className=\"btn-primary\">\n          <RefreshCw className=\"h-4 w-4 mr-2\" />\n          Upload Another File\n        </button>\n      </div>\n\n      {uploadResult && (\n        <>\n          {/* Summary */}\n          <div className=\"grid grid-cols-1 gap-5 sm:grid-cols-3\">\n            <div className=\"card text-center\">\n              <div className=\"text-2xl font-bold text-success-600\">\n                {uploadResult.processed_count}\n              </div>\n              <div className=\"text-sm text-gray-500\">Successfully Imported</div>\n            </div>\n            \n            <div className=\"card text-center\">\n              <div className=\"text-2xl font-bold text-error-600\">\n                {uploadResult.error_count}\n              </div>\n              <div className=\"text-sm text-gray-500\">Errors</div>\n            </div>\n            \n            <div className=\"card text-center\">\n              <div className=\"text-2xl font-bold text-gray-600\">\n                {uploadResult.processed_count + uploadResult.error_count}\n              </div>\n              <div className=\"text-sm text-gray-500\">Total Processed</div>\n            </div>\n          </div>\n\n          {/* Errors */}\n          {uploadResult.errors.length > 0 && (\n            <div className=\"card\">\n              <h3 className=\"text-lg font-medium text-gray-900 mb-4\">\n                Errors ({uploadResult.errors.length})\n              </h3>\n              \n              <div className=\"space-y-3\">\n                {uploadResult.errors.slice(0, 10).map((error, index) => (\n                  <div key={index} className=\"bg-error-50 border border-error-200 rounded-md p-3\">\n                    <div className=\"flex items-start\">\n                      <AlertCircle className=\"h-5 w-5 text-error-400 mt-0.5\" />\n                      <div className=\"ml-3\">\n                        <p className=\"text-sm font-medium text-error-800\">\n                          Row {error.row}: {error.error}\n                        </p>\n                        {error.transaction && (\n                          <p className=\"text-sm text-error-600 mt-1\">\n                            {error.transaction.description} - {formatCurrency(error.transaction.amount)}\n                          </p>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                ))}\n                \n                {uploadResult.errors.length > 10 && (\n                  <p className=\"text-sm text-gray-500 text-center\">\n                    ... and {uploadResult.errors.length - 10} more errors\n                  </p>\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* Successfully Imported Transactions */}\n          {uploadResult.transactions.length > 0 && (\n            <div className=\"card\">\n              <h3 className=\"text-lg font-medium text-gray-900 mb-4\">\n                Successfully Imported ({Math.min(uploadResult.transactions.length, 10)} of {uploadResult.transactions.length} shown)\n              </h3>\n              \n              <div className=\"overflow-x-auto\">\n                <table className=\"min-w-full divide-y divide-gray-200\">\n                  <thead className=\"bg-gray-50\">\n                    <tr>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Description\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Category\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Amount\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Date\n                      </th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"bg-white divide-y divide-gray-200\">\n                    {uploadResult.transactions.slice(0, 10).map((transaction, index) => (\n                      <tr key={index}>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                          {transaction.description}\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                          {transaction.category_name ? (\n                            <div className=\"flex items-center\">\n                              <div\n                                className=\"w-3 h-3 rounded-full mr-2\"\n                                style={{ backgroundColor: transaction.category_color }}\n                              />\n                              {transaction.category_name}\n                            </div>\n                          ) : (\n                            <span className=\"text-gray-400\">Uncategorized</span>\n                          )}\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm\">\n                          <span className={`font-medium ${\n                            transaction.type === 'income' ? 'text-success-600' : 'text-error-600'\n                          }`}>\n                            {transaction.type === 'income' ? '+' : '-'}\n                            {formatCurrency(transaction.amount, 'USD', false)}\n                          </span>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                          {formatDate(transaction.date)}\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          )}\n        </>\n      )}\n    </div>\n  );\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div>\n        <h1 className=\"text-2xl font-bold text-gray-900\">Upload Transactions</h1>\n        <p className=\"mt-1 text-sm text-gray-500\">\n          Import your transactions from a CSV file\n        </p>\n      </div>\n\n      {/* Progress Steps */}\n      <div className=\"flex items-center space-x-4 mb-8\">\n        <div className={`flex items-center ${currentStep === 'upload' ? 'text-primary-600' : 'text-gray-400'}`}>\n          <div className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${\n            currentStep === 'upload' ? 'bg-primary-100' : 'bg-gray-100'\n          }`}>\n            1\n          </div>\n          <span className=\"ml-2 text-sm font-medium\">Upload</span>\n        </div>\n        \n        <div className=\"flex-1 h-px bg-gray-300\"></div>\n        \n        <div className={`flex items-center ${currentStep === 'preview' ? 'text-primary-600' : 'text-gray-400'}`}>\n          <div className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${\n            currentStep === 'preview' ? 'bg-primary-100' : 'bg-gray-100'\n          }`}>\n            2\n          </div>\n          <span className=\"ml-2 text-sm font-medium\">Preview</span>\n        </div>\n        \n        <div className=\"flex-1 h-px bg-gray-300\"></div>\n        \n        <div className={`flex items-center ${currentStep === 'result' ? 'text-primary-600' : 'text-gray-400'}`}>\n          <div className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${\n            currentStep === 'result' ? 'bg-primary-100' : 'bg-gray-100'\n          }`}>\n            3\n          </div>\n          <span className=\"ml-2 text-sm font-medium\">Results</span>\n        </div>\n      </div>\n\n      {/* Step Content */}\n      {currentStep === 'upload' && renderUploadStep()}\n      {currentStep === 'preview' && renderPreviewStep()}\n      {currentStep === 'result' && renderResultStep()}\n    </div>\n  );\n};\n\nexport default Upload;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,MAAM,KAAQ,OAAO,CAC/C,OAASC,WAAW,CAAEC,cAAc,KAAQ,aAAa,CACzD,OAASC,SAAS,KAAQ,iBAAiB,CAC3C,OAASC,cAAc,CAAEC,UAAU,CAAEC,cAAc,KAAQ,qBAAqB,CAChF,OAASC,KAAK,KAAQ,iBAAiB,CACvC,OACEC,MAAM,GAAI,CAAAC,UAAU,CAEpBC,WAAW,CACXC,WAAW,CACXC,CAAC,CAEDC,GAAG,CACHC,SAAS,KACJ,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAkBtB,KAAM,CAAAZ,MAAgB,CAAGA,CAAA,GAAM,CAC7B,KAAM,CAACa,YAAY,CAAEC,eAAe,CAAC,CAAGvB,QAAQ,CAAc,IAAI,CAAC,CACnE,KAAM,CAACwB,UAAU,CAAEC,aAAa,CAAC,CAAGzB,QAAQ,CAAC,KAAK,CAAC,CACnD,KAAM,CAAC0B,cAAc,CAAEC,iBAAiB,CAAC,CAAG3B,QAAQ,CAAC,IAAI,CAAC,CAC1D,KAAM,CAAC4B,YAAY,CAAEC,eAAe,CAAC,CAAG7B,QAAQ,CAAsB,IAAI,CAAC,CAC3E,KAAM,CAAC8B,gBAAgB,CAAEC,mBAAmB,CAAC,CAAG/B,QAAQ,CAA0B,IAAI,CAAC,CACvF,KAAM,CAACgC,WAAW,CAAEC,cAAc,CAAC,CAAGjC,QAAQ,CAAkC,QAAQ,CAAC,CACzF,KAAM,CAAAkC,YAAY,CAAGjC,MAAM,CAAmB,IAAI,CAAC,CAEnD,KAAM,CAAAkC,WAAW,CAAGhC,cAAc,CAAC,CAAC,CAEpC;AACA,KAAM,CAAAiC,cAAc,CAAGlC,WAAW,CAChCmC,IAAA,MAAC,CAAEC,IAAI,CAAEZ,cAAwD,CAAC,CAAAW,IAAA,OAChE,CAAAjC,SAAS,CAACmC,SAAS,CAACD,IAAI,CAAEZ,cAAc,CAAC,GAC3C,CACEc,SAAS,CAAGC,QAAQ,EAAK,CACvBZ,eAAe,CAACY,QAAQ,CAACC,IAAI,CAAC,CAC9BT,cAAc,CAAC,QAAQ,CAAC,CACxBE,WAAW,CAACQ,iBAAiB,CAAC,cAAc,CAAC,CAC7CR,WAAW,CAACQ,iBAAiB,CAAC,WAAW,CAAC,CAC1CR,WAAW,CAACQ,iBAAiB,CAAC,YAAY,CAAC,CAE3C,KAAM,CAAEC,eAAe,CAAEC,WAAY,CAAC,CAAGJ,QAAQ,CAACC,IAAI,CACtD,GAAIG,WAAW,GAAK,CAAC,CAAE,CACrBrC,KAAK,CAACsC,OAAO,0BAAAC,MAAA,CAA0BH,eAAe,iBAAe,CAAC,CACxE,CAAC,IAAM,IAAIA,eAAe,CAAG,CAAC,CAAE,CAC9BpC,KAAK,CAACsC,OAAO,aAAAC,MAAA,CAAaH,eAAe,wBAAAG,MAAA,CAAsBF,WAAW,WAAS,CAAC,CACtF,CAAC,IAAM,CACLrC,KAAK,CAACwC,KAAK,CAAC,+BAA+B,CAAC,CAC9C,CACF,CAAC,CACDC,OAAO,CAAGD,KAAU,EAAK,KAAAE,eAAA,CAAAC,oBAAA,CACvB,KAAM,CAAAC,OAAO,CAAG,EAAAF,eAAA,CAAAF,KAAK,CAACP,QAAQ,UAAAS,eAAA,kBAAAC,oBAAA,CAAdD,eAAA,CAAgBR,IAAI,UAAAS,oBAAA,iBAApBA,oBAAA,CAAsBH,KAAK,GAAI,uBAAuB,CACtExC,KAAK,CAACwC,KAAK,CAACI,OAAO,CAAC,CACtB,CACF,CACF,CAAC,CAED;AACA,KAAM,CAAAC,gBAAgB,CAAGnD,WAAW,CACjCoC,IAAU,EAAKlC,SAAS,CAACkD,WAAW,CAAChB,IAAI,CAAC,CAC3C,CACEE,SAAS,CAAGC,QAAQ,EAAK,CACvBV,mBAAmB,CAACU,QAAQ,CAACC,IAAI,CAAC,CAClCT,cAAc,CAAC,SAAS,CAAC,CAC3B,CAAC,CACDgB,OAAO,CAAGD,KAAU,EAAK,KAAAO,gBAAA,CAAAC,qBAAA,CACvB,KAAM,CAAAJ,OAAO,CAAG,EAAAG,gBAAA,CAAAP,KAAK,CAACP,QAAQ,UAAAc,gBAAA,kBAAAC,qBAAA,CAAdD,gBAAA,CAAgBb,IAAI,UAAAc,qBAAA,iBAApBA,qBAAA,CAAsBR,KAAK,GAAI,yBAAyB,CACxExC,KAAK,CAACwC,KAAK,CAACI,OAAO,CAAC,CACpBrB,mBAAmB,CAAC,CAAE0B,KAAK,CAAE,KAAK,CAAEC,OAAO,CAAE,EAAE,CAAEC,WAAW,CAAE,CAAC,CAAEC,gBAAgB,CAAE,EAAE,CAAEZ,KAAK,CAAEI,OAAQ,CAAC,CAAC,CACxGnB,cAAc,CAAC,SAAS,CAAC,CAC3B,CACF,CACF,CAAC,CAED,KAAM,CAAA4B,UAAU,CAAIC,CAAkB,EAAK,CACzCA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBD,CAAC,CAACE,eAAe,CAAC,CAAC,CACnB,GAAIF,CAAC,CAACG,IAAI,GAAK,WAAW,EAAIH,CAAC,CAACG,IAAI,GAAK,UAAU,CAAE,CACnDxC,aAAa,CAAC,IAAI,CAAC,CACrB,CAAC,IAAM,IAAIqC,CAAC,CAACG,IAAI,GAAK,WAAW,CAAE,CACjCxC,aAAa,CAAC,KAAK,CAAC,CACtB,CACF,CAAC,CAED,KAAM,CAAAyC,UAAU,CAAIJ,CAAkB,EAAK,CACzCA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBD,CAAC,CAACE,eAAe,CAAC,CAAC,CACnBvC,aAAa,CAAC,KAAK,CAAC,CAEpB,GAAIqC,CAAC,CAACK,YAAY,CAACC,KAAK,EAAIN,CAAC,CAACK,YAAY,CAACC,KAAK,CAAC,CAAC,CAAC,CAAE,CACnDC,gBAAgB,CAACP,CAAC,CAACK,YAAY,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC,CAC3C,CACF,CAAC,CAED,KAAM,CAAAC,gBAAgB,CAAI/B,IAAU,EAAK,CACvC,GAAI,CAACA,IAAI,CAAC2B,IAAI,CAACK,QAAQ,CAAC,KAAK,CAAC,EAAI,CAAChC,IAAI,CAACiC,IAAI,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,MAAM,CAAC,CAAE,CAC3EjE,KAAK,CAACwC,KAAK,CAAC,0BAA0B,CAAC,CACvC,OACF,CAEA,GAAIV,IAAI,CAACoC,IAAI,CAAG,CAAC,CAAG,IAAI,CAAG,IAAI,CAAE,CAAE;AACjClE,KAAK,CAACwC,KAAK,CAAC,iCAAiC,CAAC,CAC9C,OACF,CAEAzB,eAAe,CAACe,IAAI,CAAC,CACrBT,eAAe,CAAC,IAAI,CAAC,CACrBE,mBAAmB,CAAC,IAAI,CAAC,CACzBE,cAAc,CAAC,QAAQ,CAAC,CAC1B,CAAC,CAED,KAAM,CAAA0C,qBAAqB,CAAIb,CAAsC,EAAK,CACxE,GAAIA,CAAC,CAACc,MAAM,CAACR,KAAK,EAAIN,CAAC,CAACc,MAAM,CAACR,KAAK,CAAC,CAAC,CAAC,CAAE,CACvCC,gBAAgB,CAACP,CAAC,CAACc,MAAM,CAACR,KAAK,CAAC,CAAC,CAAC,CAAC,CACrC,CACF,CAAC,CAED,KAAM,CAAAS,cAAc,CAAGA,CAAA,GAAM,CAC3B,GAAIvD,YAAY,CAAE,CAChB+B,gBAAgB,CAACyB,MAAM,CAACxD,YAAY,CAAC,CACvC,CACF,CAAC,CAED,KAAM,CAAAyD,YAAY,CAAGA,CAAA,GAAM,CACzB,GAAIzD,YAAY,CAAE,CAChBc,cAAc,CAAC0C,MAAM,CAAC,CAAExC,IAAI,CAAEhB,YAAY,CAAEI,cAAe,CAAC,CAAC,CAC/D,CACF,CAAC,CAED,KAAM,CAAAsD,WAAW,CAAGA,CAAA,GAAM,CACxBzD,eAAe,CAAC,IAAI,CAAC,CACrBM,eAAe,CAAC,IAAI,CAAC,CACrBE,mBAAmB,CAAC,IAAI,CAAC,CACzBE,cAAc,CAAC,QAAQ,CAAC,CACxB,GAAIC,YAAY,CAAC+C,OAAO,CAAE,CACxB/C,YAAY,CAAC+C,OAAO,CAACC,KAAK,CAAG,EAAE,CACjC,CACF,CAAC,CAED,KAAM,CAAAC,gBAAgB,CAAGA,CAAA,gBACvBhE,KAAA,QAAKiE,SAAS,CAAC,WAAW,CAAAC,QAAA,eAExBlE,KAAA,QACEiE,SAAS,mDAAArC,MAAA,CACPvB,UAAU,CACN,kCAAkC,CAClCF,YAAY,CACZ,kCAAkC,CAClC,uCAAuC,CAC1C,CACHgE,WAAW,CAAEzB,UAAW,CACxB0B,WAAW,CAAE1B,UAAW,CACxB2B,UAAU,CAAE3B,UAAW,CACvB4B,MAAM,CAAEvB,UAAW,CAAAmB,QAAA,eAEnBlE,KAAA,QAAKiE,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BpE,IAAA,CAACP,UAAU,EAAC0E,SAAS,sBAAArC,MAAA,CACnBzB,YAAY,CAAG,kBAAkB,CAAG,eAAe,CAClD,CAAE,CAAC,cACNL,IAAA,QAAKmE,SAAS,CAAC,MAAM,CAAAC,QAAA,CAClB/D,YAAY,cACXH,KAAA,QAAAkE,QAAA,eACElE,KAAA,MAAGiE,SAAS,CAAC,sCAAsC,CAAAC,QAAA,EAAC,iBACnC,CAAC/D,YAAY,CAACiD,IAAI,EAChC,CAAC,cACJpD,KAAA,MAAGiE,SAAS,CAAC,uBAAuB,CAAAC,QAAA,EAAC,QAC7B,CAAC9E,cAAc,CAACe,YAAY,CAACoD,IAAI,CAAC,EACvC,CAAC,EACD,CAAC,cAENvD,KAAA,QAAAkE,QAAA,eACEpE,IAAA,UAAOyE,OAAO,CAAC,aAAa,CAACN,SAAS,CAAC,gBAAgB,CAAAC,QAAA,cACrDlE,KAAA,SAAMiE,SAAS,CAAC,8CAA8C,CAAAC,QAAA,EAAC,6BAClC,CAAC,GAAG,cAC/BpE,IAAA,SAAMmE,SAAS,CAAC,yCAAyC,CAAAC,QAAA,CAAC,QAAM,CAAM,CAAC,EACnE,CAAC,CACF,CAAC,cACRpE,IAAA,MAAGmE,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,mCAE1C,CAAG,CAAC,EACD,CACN,CACE,CAAC,EACH,CAAC,cAENpE,IAAA,UACE0E,GAAG,CAAEzD,YAAa,CAClB0D,EAAE,CAAC,aAAa,CAChBrB,IAAI,CAAC,aAAa,CAClBN,IAAI,CAAC,MAAM,CACX4B,MAAM,CAAC,MAAM,CACbT,SAAS,CAAC,SAAS,CACnBU,QAAQ,CAAEnB,qBAAsB,CACjC,CAAC,EACC,CAAC,CAGLrD,YAAY,eACXH,KAAA,QAAKiE,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBpE,IAAA,OAAImE,SAAS,CAAC,wCAAwC,CAAAC,QAAA,CAAC,gBAAc,CAAI,CAAC,cAE1EpE,IAAA,QAAKmE,SAAS,CAAC,WAAW,CAAAC,QAAA,cACxBlE,KAAA,QAAKiE,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/BpE,IAAA,QAAKmE,SAAS,CAAC,uBAAuB,CAAAC,QAAA,cACpCpE,IAAA,UACE2E,EAAE,CAAC,iBAAiB,CACpB3B,IAAI,CAAC,UAAU,CACf8B,OAAO,CAAErE,cAAe,CACxBoE,QAAQ,CAAGhC,CAAC,EAAKnC,iBAAiB,CAACmC,CAAC,CAACc,MAAM,CAACmB,OAAO,CAAE,CACrDX,SAAS,CAAC,yEAAyE,CACpF,CAAC,CACC,CAAC,cACNjE,KAAA,QAAKiE,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BpE,IAAA,UAAOyE,OAAO,CAAC,iBAAiB,CAACN,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CAAC,8BAEvE,CAAO,CAAC,cACRpE,IAAA,MAAGmE,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,6EAE7B,CAAG,CAAC,EACD,CAAC,EACH,CAAC,CACH,CAAC,cAENlE,KAAA,QAAKiE,SAAS,CAAC,qBAAqB,CAAAC,QAAA,eAClClE,KAAA,WACE6E,OAAO,CAAEnB,cAAe,CACxBoB,QAAQ,CAAE5C,gBAAgB,CAAC6C,SAAU,CACrCd,SAAS,CAAC,eAAe,CAAAC,QAAA,EAExBhC,gBAAgB,CAAC6C,SAAS,cACzBjF,IAAA,QAAKmE,SAAS,CAAC,cAAc,CAAE,CAAC,cAEhCnE,IAAA,CAACH,GAAG,EAACsE,SAAS,CAAC,cAAc,CAAE,CAChC,CAAC,SAEJ,EAAQ,CAAC,cAETjE,KAAA,WACE6E,OAAO,CAAEjB,YAAa,CACtBkB,QAAQ,CAAE7D,cAAc,CAAC8D,SAAU,CACnCd,SAAS,CAAC,aAAa,CAAAC,QAAA,EAEtBjD,cAAc,CAAC8D,SAAS,cACvBjF,IAAA,QAAKmE,SAAS,CAAC,cAAc,CAAE,CAAC,cAEhCnE,IAAA,CAACP,UAAU,EAAC0E,SAAS,CAAC,cAAc,CAAE,CACvC,CAAC,QAEJ,EAAQ,CAAC,EACN,CAAC,EACH,CACN,cAGDjE,KAAA,QAAKiE,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBpE,IAAA,OAAImE,SAAS,CAAC,wCAAwC,CAAAC,QAAA,CAAC,kBAAgB,CAAI,CAAC,cAE5ElE,KAAA,QAAKiE,SAAS,CAAC,iCAAiC,CAAAC,QAAA,eAC9CpE,IAAA,MAAAoE,QAAA,CAAG,iFAA+E,CAAG,CAAC,cAEtFlE,KAAA,OAAIiE,SAAS,CAAC,sCAAsC,CAAAC,QAAA,eAClDlE,KAAA,OAAAkE,QAAA,eAAIpE,IAAA,WAAAoE,QAAA,CAAQ,SAAO,CAAQ,CAAC,6CAA0C,EAAI,CAAC,cAC3ElE,KAAA,OAAAkE,QAAA,eAAIpE,IAAA,WAAAoE,QAAA,CAAQ,cAAY,CAAQ,CAAC,mCAAgC,EAAI,CAAC,cACtElE,KAAA,OAAAkE,QAAA,eAAIpE,IAAA,WAAAoE,QAAA,CAAQ,OAAK,CAAQ,CAAC,gDAA6C,EAAI,CAAC,cAC5ElE,KAAA,OAAAkE,QAAA,eAAIpE,IAAA,WAAAoE,QAAA,CAAQ,WAAS,CAAQ,CAAC,mCAAgC,EAAI,CAAC,EACjE,CAAC,cAELlE,KAAA,QAAKiE,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1CpE,IAAA,MAAGmE,SAAS,CAAC,gCAAgC,CAAAC,QAAA,CAAC,qBAAmB,CAAG,CAAC,cACrElE,KAAA,QAAKiE,SAAS,CAAC,uBAAuB,CAAAC,QAAA,EAAC,kCACnB,CAAC,IAAI,CAAC,sCACF,CAAC,IAAI,CAAC,0CACF,CAAC,IAAI,CAAC,8CAElC,EAAK,CAAC,EACH,CAAC,EACH,CAAC,EACH,CAAC,EACH,CACN,CAED,KAAM,CAAAc,iBAAiB,CAAGA,CAAA,gBACxBhF,KAAA,QAAKiE,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBlE,KAAA,QAAKiE,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChDpE,IAAA,OAAImE,SAAS,CAAC,qCAAqC,CAAAC,QAAA,CAAC,SAAO,CAAI,CAAC,cAChElE,KAAA,WAAQ6E,OAAO,CAAEhB,WAAY,CAACI,SAAS,CAAC,eAAe,CAAAC,QAAA,eACrDpE,IAAA,CAACJ,CAAC,EAACuE,SAAS,CAAC,cAAc,CAAE,CAAC,SAEhC,EAAQ,CAAC,EACN,CAAC,CAELtD,gBAAgB,eACfX,KAAA,QAAKiE,SAAS,CAAC,MAAM,CAAAC,QAAA,EAClBvD,gBAAgB,CAAC2B,KAAK,cACrBtC,KAAA,QAAKiE,SAAS,CAAC,oCAAoC,CAAAC,QAAA,eACjDpE,IAAA,CAACN,WAAW,EAACyE,SAAS,CAAC,cAAc,CAAE,CAAC,cACxCnE,IAAA,SAAMmE,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAC,4BAA0B,CAAM,CAAC,EAC5D,CAAC,cAENlE,KAAA,QAAKiE,SAAS,CAAC,kCAAkC,CAAAC,QAAA,eAC/CpE,IAAA,CAACL,WAAW,EAACwE,SAAS,CAAC,cAAc,CAAE,CAAC,cACxCnE,IAAA,SAAMmE,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAC,wBAAsB,CAAM,CAAC,EACxD,CACN,CAEAvD,gBAAgB,CAAC2B,KAAK,eACrBtC,KAAA,QAAKiE,SAAS,CAAC,qCAAqC,CAAAC,QAAA,eAClDlE,KAAA,QAAAkE,QAAA,eACEpE,IAAA,SAAMmE,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,qBAAmB,CAAM,CAAC,cAC1DpE,IAAA,SAAMmE,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAAEvD,gBAAgB,CAAC6B,WAAW,CAAO,CAAC,EACrE,CAAC,cACNxC,KAAA,QAAAkE,QAAA,eACEpE,IAAA,SAAMmE,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,mBAAiB,CAAM,CAAC,cACxDpE,IAAA,SAAMmE,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAAEvD,gBAAgB,CAAC8B,gBAAgB,CAACwC,MAAM,CAAO,CAAC,EACjF,CAAC,EACH,CACN,CAEAtE,gBAAgB,CAACkB,KAAK,eACrB/B,IAAA,QAAKmE,SAAS,CAAC,6BAA6B,CAAAC,QAAA,cAC1CpE,IAAA,MAAAoE,QAAA,CAAIvD,gBAAgB,CAACkB,KAAK,CAAI,CAAC,CAC5B,CACN,EACE,CACN,CAEA,CAAAlB,gBAAgB,SAAhBA,gBAAgB,iBAAhBA,gBAAgB,CAAE2B,KAAK,GAAI3B,gBAAgB,CAAC4B,OAAO,CAAC0C,MAAM,CAAG,CAAC,eAC7DjF,KAAA,QAAKiE,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBpE,IAAA,OAAImE,SAAS,CAAC,wCAAwC,CAAAC,QAAA,CAAC,oCAEvD,CAAI,CAAC,cAELpE,IAAA,QAAKmE,SAAS,CAAC,iBAAiB,CAAAC,QAAA,cAC9BlE,KAAA,UAAOiE,SAAS,CAAC,qCAAqC,CAAAC,QAAA,eACpDpE,IAAA,UAAOmE,SAAS,CAAC,YAAY,CAAAC,QAAA,cAC3BlE,KAAA,OAAAkE,QAAA,eACEpE,IAAA,OAAImE,SAAS,CAAC,gFAAgF,CAAAC,QAAA,CAAC,aAE/F,CAAI,CAAC,cACLpE,IAAA,OAAImE,SAAS,CAAC,gFAAgF,CAAAC,QAAA,CAAC,QAE/F,CAAI,CAAC,cACLpE,IAAA,OAAImE,SAAS,CAAC,gFAAgF,CAAAC,QAAA,CAAC,MAE/F,CAAI,CAAC,cACLpE,IAAA,OAAImE,SAAS,CAAC,gFAAgF,CAAAC,QAAA,CAAC,MAE/F,CAAI,CAAC,EACH,CAAC,CACA,CAAC,cACRpE,IAAA,UAAOmE,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CACjDvD,gBAAgB,CAAC4B,OAAO,CAAC2C,GAAG,CAAC,CAACC,WAAW,CAAEC,KAAK,gBAC/CpF,KAAA,OAAAkE,QAAA,eACEpE,IAAA,OAAImE,SAAS,CAAC,mDAAmD,CAAAC,QAAA,CAC9DiB,WAAW,CAACE,WAAW,CACtB,CAAC,cACLvF,IAAA,OAAImE,SAAS,CAAC,mDAAmD,CAAAC,QAAA,CAC9DhF,cAAc,CAACiG,WAAW,CAACG,MAAM,CAAC,CACjC,CAAC,cACLxF,IAAA,OAAImE,SAAS,CAAC,6BAA6B,CAAAC,QAAA,cACzCpE,IAAA,SAAMmE,SAAS,4EAAArC,MAAA,CACbuD,WAAW,CAACrC,IAAI,GAAK,QAAQ,CACzB,iCAAiC,CACjC,6BAA6B,CAChC,CAAAoB,QAAA,CACAiB,WAAW,CAACrC,IAAI,CACb,CAAC,CACL,CAAC,cACLhD,IAAA,OAAImE,SAAS,CAAC,mDAAmD,CAAAC,QAAA,CAC9D/E,UAAU,CAACgG,WAAW,CAACI,IAAI,CAAC,CAC3B,CAAC,GAlBEH,KAmBL,CACL,CAAC,CACG,CAAC,EACH,CAAC,CACL,CAAC,cAENpF,KAAA,QAAKiE,SAAS,CAAC,iCAAiC,CAAAC,QAAA,eAC9CpE,IAAA,WAAQ+E,OAAO,CAAEhB,WAAY,CAACI,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,QAExD,CAAQ,CAAC,cACTlE,KAAA,WACE6E,OAAO,CAAEjB,YAAa,CACtBkB,QAAQ,CAAE7D,cAAc,CAAC8D,SAAU,CACnCd,SAAS,CAAC,aAAa,CAAAC,QAAA,EAEtBjD,cAAc,CAAC8D,SAAS,cACvBjF,IAAA,QAAKmE,SAAS,CAAC,cAAc,CAAE,CAAC,cAEhCnE,IAAA,CAACP,UAAU,EAAC0E,SAAS,CAAC,cAAc,CAAE,CACvC,CAAC,qBAEJ,EAAQ,CAAC,EACN,CAAC,EACH,CACN,EACE,CACN,CAED,KAAM,CAAAuB,gBAAgB,CAAGA,CAAA,gBACvBxF,KAAA,QAAKiE,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBlE,KAAA,QAAKiE,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChDpE,IAAA,OAAImE,SAAS,CAAC,qCAAqC,CAAAC,QAAA,CAAC,gBAAc,CAAI,CAAC,cACvElE,KAAA,WAAQ6E,OAAO,CAAEhB,WAAY,CAACI,SAAS,CAAC,aAAa,CAAAC,QAAA,eACnDpE,IAAA,CAACF,SAAS,EAACqE,SAAS,CAAC,cAAc,CAAE,CAAC,sBAExC,EAAQ,CAAC,EACN,CAAC,CAELxD,YAAY,eACXT,KAAA,CAAAE,SAAA,EAAAgE,QAAA,eAEElE,KAAA,QAAKiE,SAAS,CAAC,uCAAuC,CAAAC,QAAA,eACpDlE,KAAA,QAAKiE,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/BpE,IAAA,QAAKmE,SAAS,CAAC,qCAAqC,CAAAC,QAAA,CACjDzD,YAAY,CAACgB,eAAe,CAC1B,CAAC,cACN3B,IAAA,QAAKmE,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,uBAAqB,CAAK,CAAC,EAC/D,CAAC,cAENlE,KAAA,QAAKiE,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/BpE,IAAA,QAAKmE,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAC/CzD,YAAY,CAACiB,WAAW,CACtB,CAAC,cACN5B,IAAA,QAAKmE,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,QAAM,CAAK,CAAC,EAChD,CAAC,cAENlE,KAAA,QAAKiE,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/BpE,IAAA,QAAKmE,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAC9CzD,YAAY,CAACgB,eAAe,CAAGhB,YAAY,CAACiB,WAAW,CACrD,CAAC,cACN5B,IAAA,QAAKmE,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,iBAAe,CAAK,CAAC,EACzD,CAAC,EACH,CAAC,CAGLzD,YAAY,CAACgF,MAAM,CAACR,MAAM,CAAG,CAAC,eAC7BjF,KAAA,QAAKiE,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBlE,KAAA,OAAIiE,SAAS,CAAC,wCAAwC,CAAAC,QAAA,EAAC,UAC7C,CAACzD,YAAY,CAACgF,MAAM,CAACR,MAAM,CAAC,GACtC,EAAI,CAAC,cAELjF,KAAA,QAAKiE,SAAS,CAAC,WAAW,CAAAC,QAAA,EACvBzD,YAAY,CAACgF,MAAM,CAACC,KAAK,CAAC,CAAC,CAAE,EAAE,CAAC,CAACR,GAAG,CAAC,CAACrD,KAAK,CAAEuD,KAAK,gBACjDtF,IAAA,QAAiBmE,SAAS,CAAC,oDAAoD,CAAAC,QAAA,cAC7ElE,KAAA,QAAKiE,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/BpE,IAAA,CAACL,WAAW,EAACwE,SAAS,CAAC,+BAA+B,CAAE,CAAC,cACzDjE,KAAA,QAAKiE,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBlE,KAAA,MAAGiE,SAAS,CAAC,oCAAoC,CAAAC,QAAA,EAAC,MAC5C,CAACrC,KAAK,CAAC8D,GAAG,CAAC,IAAE,CAAC9D,KAAK,CAACA,KAAK,EAC5B,CAAC,CACHA,KAAK,CAACsD,WAAW,eAChBnF,KAAA,MAAGiE,SAAS,CAAC,6BAA6B,CAAAC,QAAA,EACvCrC,KAAK,CAACsD,WAAW,CAACE,WAAW,CAAC,KAAG,CAACnG,cAAc,CAAC2C,KAAK,CAACsD,WAAW,CAACG,MAAM,CAAC,EAC1E,CACJ,EACE,CAAC,EACH,CAAC,EAbEF,KAcL,CACN,CAAC,CAED3E,YAAY,CAACgF,MAAM,CAACR,MAAM,CAAG,EAAE,eAC9BjF,KAAA,MAAGiE,SAAS,CAAC,mCAAmC,CAAAC,QAAA,EAAC,UACvC,CAACzD,YAAY,CAACgF,MAAM,CAACR,MAAM,CAAG,EAAE,CAAC,cAC3C,EAAG,CACJ,EACE,CAAC,EACH,CACN,CAGAxE,YAAY,CAACmF,YAAY,CAACX,MAAM,CAAG,CAAC,eACnCjF,KAAA,QAAKiE,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBlE,KAAA,OAAIiE,SAAS,CAAC,wCAAwC,CAAAC,QAAA,EAAC,yBAC9B,CAAC2B,IAAI,CAACC,GAAG,CAACrF,YAAY,CAACmF,YAAY,CAACX,MAAM,CAAE,EAAE,CAAC,CAAC,MAAI,CAACxE,YAAY,CAACmF,YAAY,CAACX,MAAM,CAAC,SAC/G,EAAI,CAAC,cAELnF,IAAA,QAAKmE,SAAS,CAAC,iBAAiB,CAAAC,QAAA,cAC9BlE,KAAA,UAAOiE,SAAS,CAAC,qCAAqC,CAAAC,QAAA,eACpDpE,IAAA,UAAOmE,SAAS,CAAC,YAAY,CAAAC,QAAA,cAC3BlE,KAAA,OAAAkE,QAAA,eACEpE,IAAA,OAAImE,SAAS,CAAC,gFAAgF,CAAAC,QAAA,CAAC,aAE/F,CAAI,CAAC,cACLpE,IAAA,OAAImE,SAAS,CAAC,gFAAgF,CAAAC,QAAA,CAAC,UAE/F,CAAI,CAAC,cACLpE,IAAA,OAAImE,SAAS,CAAC,gFAAgF,CAAAC,QAAA,CAAC,QAE/F,CAAI,CAAC,cACLpE,IAAA,OAAImE,SAAS,CAAC,gFAAgF,CAAAC,QAAA,CAAC,MAE/F,CAAI,CAAC,EACH,CAAC,CACA,CAAC,cACRpE,IAAA,UAAOmE,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CACjDzD,YAAY,CAACmF,YAAY,CAACF,KAAK,CAAC,CAAC,CAAE,EAAE,CAAC,CAACR,GAAG,CAAC,CAACC,WAAW,CAAEC,KAAK,gBAC7DpF,KAAA,OAAAkE,QAAA,eACEpE,IAAA,OAAImE,SAAS,CAAC,mDAAmD,CAAAC,QAAA,CAC9DiB,WAAW,CAACE,WAAW,CACtB,CAAC,cACLvF,IAAA,OAAImE,SAAS,CAAC,mDAAmD,CAAAC,QAAA,CAC9DiB,WAAW,CAACY,aAAa,cACxB/F,KAAA,QAAKiE,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCpE,IAAA,QACEmE,SAAS,CAAC,2BAA2B,CACrC+B,KAAK,CAAE,CAAEC,eAAe,CAAEd,WAAW,CAACe,cAAe,CAAE,CACxD,CAAC,CACDf,WAAW,CAACY,aAAa,EACvB,CAAC,cAENjG,IAAA,SAAMmE,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,eAAa,CAAM,CACpD,CACC,CAAC,cACLpE,IAAA,OAAImE,SAAS,CAAC,qCAAqC,CAAAC,QAAA,cACjDlE,KAAA,SAAMiE,SAAS,gBAAArC,MAAA,CACbuD,WAAW,CAACrC,IAAI,GAAK,QAAQ,CAAG,kBAAkB,CAAG,gBAAgB,CACpE,CAAAoB,QAAA,EACAiB,WAAW,CAACrC,IAAI,GAAK,QAAQ,CAAG,GAAG,CAAG,GAAG,CACzC5D,cAAc,CAACiG,WAAW,CAACG,MAAM,CAAE,KAAK,CAAE,KAAK,CAAC,EAC7C,CAAC,CACL,CAAC,cACLxF,IAAA,OAAImE,SAAS,CAAC,mDAAmD,CAAAC,QAAA,CAC9D/E,UAAU,CAACgG,WAAW,CAACI,IAAI,CAAC,CAC3B,CAAC,GA3BEH,KA4BL,CACL,CAAC,CACG,CAAC,EACH,CAAC,CACL,CAAC,EACH,CACN,EACD,CACH,EACE,CACN,CAED,mBACEpF,KAAA,QAAKiE,SAAS,CAAC,WAAW,CAAAC,QAAA,eAExBlE,KAAA,QAAAkE,QAAA,eACEpE,IAAA,OAAImE,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAC,qBAAmB,CAAI,CAAC,cACzEpE,IAAA,MAAGmE,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,0CAE1C,CAAG,CAAC,EACD,CAAC,cAGNlE,KAAA,QAAKiE,SAAS,CAAC,kCAAkC,CAAAC,QAAA,eAC/ClE,KAAA,QAAKiE,SAAS,sBAAArC,MAAA,CAAuBf,WAAW,GAAK,QAAQ,CAAG,kBAAkB,CAAG,eAAe,CAAG,CAAAqD,QAAA,eACrGpE,IAAA,QAAKmE,SAAS,8EAAArC,MAAA,CACZf,WAAW,GAAK,QAAQ,CAAG,gBAAgB,CAAG,aAAa,CAC1D,CAAAqD,QAAA,CAAC,GAEJ,CAAK,CAAC,cACNpE,IAAA,SAAMmE,SAAS,CAAC,0BAA0B,CAAAC,QAAA,CAAC,QAAM,CAAM,CAAC,EACrD,CAAC,cAENpE,IAAA,QAAKmE,SAAS,CAAC,yBAAyB,CAAM,CAAC,cAE/CjE,KAAA,QAAKiE,SAAS,sBAAArC,MAAA,CAAuBf,WAAW,GAAK,SAAS,CAAG,kBAAkB,CAAG,eAAe,CAAG,CAAAqD,QAAA,eACtGpE,IAAA,QAAKmE,SAAS,8EAAArC,MAAA,CACZf,WAAW,GAAK,SAAS,CAAG,gBAAgB,CAAG,aAAa,CAC3D,CAAAqD,QAAA,CAAC,GAEJ,CAAK,CAAC,cACNpE,IAAA,SAAMmE,SAAS,CAAC,0BAA0B,CAAAC,QAAA,CAAC,SAAO,CAAM,CAAC,EACtD,CAAC,cAENpE,IAAA,QAAKmE,SAAS,CAAC,yBAAyB,CAAM,CAAC,cAE/CjE,KAAA,QAAKiE,SAAS,sBAAArC,MAAA,CAAuBf,WAAW,GAAK,QAAQ,CAAG,kBAAkB,CAAG,eAAe,CAAG,CAAAqD,QAAA,eACrGpE,IAAA,QAAKmE,SAAS,8EAAArC,MAAA,CACZf,WAAW,GAAK,QAAQ,CAAG,gBAAgB,CAAG,aAAa,CAC1D,CAAAqD,QAAA,CAAC,GAEJ,CAAK,CAAC,cACNpE,IAAA,SAAMmE,SAAS,CAAC,0BAA0B,CAAAC,QAAA,CAAC,SAAO,CAAM,CAAC,EACtD,CAAC,EACH,CAAC,CAGLrD,WAAW,GAAK,QAAQ,EAAImD,gBAAgB,CAAC,CAAC,CAC9CnD,WAAW,GAAK,SAAS,EAAImE,iBAAiB,CAAC,CAAC,CAChDnE,WAAW,GAAK,QAAQ,EAAI2E,gBAAgB,CAAC,CAAC,EAC5C,CAAC,CAEV,CAAC,CAED,cAAe,CAAAlG,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}